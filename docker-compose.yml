version: "3.8"

services:
  dragons-api:
    build:
      context: .
      dockerfile: Dockerfile
    image: dragons:dev
    container_name: dragons
    restart: unless-stopped

    ports:
      - "8083:8083"

    environment:
      SPRING_PROFILES_ACTIVE: dev
      SERVER_PORT: 8083
      # Spring relaxed binding: DATASOURCE_REDIS_ENABLED -> datasource.redis.enabled
      DATASOURCE_REDIS_ENABLED: "false"
      # Optional JVM tuning
      JAVA_OPTS: "-XX:+UseContainerSupport -Xms256m -Xmx512m"

    # Rely on Dockerfile ENTRYPOINT (java -jar /app/app.jar)
